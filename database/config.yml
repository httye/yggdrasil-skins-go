# YggdrasilGo 皮肤站数据库配置
# 支持多种存储后端：mysql, sqlite, postgresql

database:
  # MySQL配置（推荐用于生产环境）
  type: "mysql"
  mysql:
    host: "localhost"
    port: 3306
    database: "yggdrasil_skin_server"
    username: "yggdrasil_user"
    password: "your_secure_password_here"
    charset: "utf8mb4"
    collation: "utf8mb4_unicode_ci"
    max_open_conns: 25
    max_idle_conns: 5
    conn_max_lifetime: "300s"
    log_level: "info"  # silent, error, warn, info
    
  # SQLite配置（适合开发和小型部署）
  # type: "sqlite"
  # sqlite:
  #   database_path: "data/skin_server.db"
  #   log_level: "info"
  
  # PostgreSQL配置
  # type: "postgresql"  
  # postgresql:
  #   host: "localhost"
  #   port: 5432
  #   database: "yggdrasil_skin_server"
  #   username: "yggdrasil_user"
  #   password: "your_secure_password_here"
  #   ssl_mode: "disable"
  #   log_level: "info"

# Redis缓存配置（可选，用于高性能缓存）
redis:
  enabled: true
  host: "localhost"
  port: 6379
  password: ""
  database: 1
  max_retries: 3
  dial_timeout: "5s"
  read_timeout: "3s"
  write_timeout: "3s"
  pool_size: 10
  min_idle_conns: 5

# 文件存储配置
storage:
  # 皮肤文件存储路径
  skins_path: "storage/skins"
  capes_path: "storage/capes"
  avatars_path: "storage/avatars"
  
  # 文件大小限制
  max_skin_size: 2097152  # 2MB
  max_cape_size: 2097152  # 2MB
  max_avatar_size: 524288  # 512KB
  
  # 允许的文件类型
  allowed_image_types: ["image/png", "image/jpeg", "image/jpg"]
  
  # 图片处理配置
  image_processing:
    # 皮肤尺寸验证
    skin_dimensions:
      steve: [[64, 64], [64, 32]]  # Steve模型支持的尺寸
      alex: [[64, 64]]             # Alex模型支持的尺寸
    
    # 披风尺寸验证  
    cape_dimensions: [[64, 32]]    # 披风支持的尺寸
    
    # 头像生成配置
    avatar_size: 64
    avatar_format: "png"
    
    # 预览图生成配置
    preview_size: 256
    preview_format: "png"

# 系统配置
system:
  # 网站基本信息
  site_name: "YggdrasilGo 皮肤站"
  site_description: "Minecraft皮肤资源分享平台"
  site_url: "https://skins.yourserver.com"
  
  # 注册配置
  registration:
    enabled: true
    email_verification: false
    default_group_id: 1  # 默认权限组ID
    max_profiles_default: 5  # 默认角色数量限制
    
  # 皮肤审核配置
  skin_moderation:
    enabled: true  # 是否启用皮肤审核
    auto_approve_public: false  # 公开皮肤是否自动审核
    
  # 公告配置
  announcements:
    max_active: 5  # 最大活跃公告数
    default_priority: 0  # 默认优先级
    
  # 统计配置
  statistics:
    update_interval: "5m"  # 统计更新间隔
    retention_days: 90     # 统计数据保留天数
    
  # 清理配置
  cleanup:
    temp_files_days: 7     # 临时文件保留天数
    old_logs_days: 365     # 旧日志保留天数
    inactive_users_days: 730  # 非活跃用户保留天数

# 性能配置
performance:
  # 缓存配置
  cache:
    user_info_ttl: "1h"      # 用户信息缓存时间
    skin_info_ttl: "24h"     # 皮肤信息缓存时间
    server_status_ttl: "30s" # 服务器状态缓存时间
    announcement_ttl: "5m"   # 公告缓存时间
    
  # 数据库查询优化
  database:
    slow_query_threshold: "500ms"  # 慢查询阈值
    query_timeout: "30s"           # 查询超时时间
    
  # 并发限制
  limits:
    max_concurrent_uploads: 10     # 最大并发上传数
    max_concurrent_downloads: 50   # 最大并发下载数
    rate_limit_requests: 100       # 速率限制（请求数/分钟）

# 安全配置
security:
  # 密码配置
  password:
    min_length: 8
    require_uppercase: true
    require_lowercase: true
    require_numbers: true
    require_special_chars: false
    
  # JWT配置
  jwt:
    access_token_ttl: "2h"
    refresh_token_ttl: "7d"
    secret_key: "your-super-secret-jwt-key-change-in-production"
    
  # CORS配置
  cors:
    allowed_origins: ["*"]
    allowed_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
    allowed_headers: ["*"]
    
  # 文件上传安全
  upload:
    scan_viruses: false  # 是否扫描病毒（需要额外配置）
    check_duplicates: true  # 是否检查重复文件
    generate_checksums: true  # 是否生成文件校验和